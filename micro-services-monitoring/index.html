<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <title>Monitoring Micro-Service Architectures</title>

  <meta name="description" content="monitoring micro-services architectures">
  <meta name="author" content="Zohar Arad">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="../reveal-js-2.5.0/css/reveal.min.css">
  <link rel="stylesheet" href="../reveal-js-2.5.0/css/theme/solarized.css" id="theme">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="../reveal-js-2.5.0/lib/css/zenburn.css">

  <!-- If the query includes 'print-pdf', use the PDF print sheet -->
  <script>
    document.write( '<link rel="stylesheet" href="../reveal-js-2.5.0/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
  </script>

  <!--[if lt IE 9]>
  <script src="../reveal-js-2.5.0/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">

    <div class="slides">
      <section>
        <h2>Effectively Monitor</h2>
        <h4>Your micro-services architecture</h4>
        <footer>
          <p>
            <small>Zohar Arad. &copy; 2014</small>
          </p>
        </footer>
      </section>
      <section>
        <h2>About Me</h2>
        <ul>
          <li>Full-Stack Web Developer</li>
          <li>Lead-Tech at Quicklizard Ltd.</li>
          <li>Freelance consultant &amp; Trainer</li>
        </ul>
      </section>
      <section>
        <h2>Why do we need monitoring?</h2>
      </section>
      <section>
        <h2>Real Time Visibility</h2>
        <ul>
          <li>What's happening with my application NOW?</li>
          <li>Is everything working properly?</li>
          <li>Where are my sore points?</li>
        </ul>
      </section>
      <section>
        <h2>Real-Time and Historical Analysis</h2>
        <ul>
          <li>Why did things break after deployment?</li>
          <li>How can I find bottlenecks?</li>
          <li>Is my application working well over time?</li>
        </ul>
      </section>
      <section>
        <h2>Automatic Reaction</h2>
        <ul>
          <li>What do we do when things stop working?</li>
          <li>Service resurrection</li>
          <li>OS housekeeping</li>
          <li>Reacting to node failures</li>
          <li>Load changes</li>
          <li>Cluster maintenance</li>
        </ul>
      </section>
      <section>
        <p>
          Monitoring is about <strong>knowledge</strong>, <strong>control</strong> and <strong>preemption</strong>.
        </p>
        <p>
          We monitor stuff so we can <strong>meet our SLA</strong> without losing sleep.
        </p>
      </section>
      <section>
        <h3>From monolithic to service-oriented architecture</h3>
      </section>
      <section>
        <h3>Monitoring Monolithic Applications</h3>
        <ul>
          <li>Small number of servers</li>
          <li>Limited number of metrics (OS, App)</li>
          <li>Centralized model (everything is in one place)</li>
          <li>Relatively straight-forward monitoring &amp; analysis</li>
        </ul>
      </section>
      <section>
        <p>When things break in a monolithic application our course of action is usually simple</p>
      </section>
      <section>
        <ul>
          <li>Login to server</li>
          <li>Check OS health</li>
          <li>Check services</li>
          <li>Check logs</li>
          <li>Find, fix and deploy</li>
        </ul>
      </section>
      <section>
        <p>Now, imagine doing that on a cluster with 50 machines</p>
      </section>
      <section>
        <h3>Challenges of Monitoring Micro-Services</h3>
        <ul>
          <li>Many machines (which log file do I look at?)</li>
          <li>Different types of applications (which service broke?)</li>
          <li>Many moving parts (which MongoDB node failed?)</li>
          <li>A lot of fragmented information to sift through</li>
        </ul>
      </section>
      <section>
        <h3>Clearly, we need a different approach</h3>
        <ul>
          <li>Centralized information aggregation</li>
          <li>Real-time visibility of service health</li>
          <li>Focus on problems by severity (prioritizing human resources)</li>
          <li>Powerful analysis tools (tail | grep isn't enough)</li>
          <li>Scalable, cluster-oriented solutions</li>
        </ul>
      </section>
      <section>
        <h3>Centralized log visualization with Kibana</h3>
      </section>
      <section>
        <h3>Kibana in a nutshell</h3>
        <ul>
          <li>Aggregate logs / time-stamped data into Elastic Search</li>
          <li>Interact with data, search &amp; analyse using Kibana</li>
        </ul>
      </section>
      <section>
        <h3>Kibana in a nutshell</h3>
        <ul>
          <li>Use common log aggregators - Logstash, Fluentd, Flume</li>
          <li>Scale horizontally with Elastic Search</li>
          <li>Enjoy rich indexing and querying capabilities from a central UI</li>
        </ul>
      </section>
      <section>
        <figure>
          <img src="img/kibana-dashboard-1.png" />
          <figcaption>
            <p>
              <small>Kibana Dashboard</small>
            </p>
          </figcaption>
        </figure>
      </section>
      <section>
        <h3>What can I do with Kibana you ask?</h3>
        <ul>
          <li>Collect logs from all your services into one place</li>
          <li>Analyse log data in a visual way</li>
          <li>Filter data by source and time-frame</li>
          <li>Save and share queries</li>
          <li>Group queries into contextual dashboards</li>
        </ul>
      </section>
      <section>
        <h3>Why should I use Kibana?</h3>
        <ul>
          <li>Built on top of open-source, battle-proven technologies</li>
          <li>Actively developed as part of the Elastic Search Project</li>
          <li>Scalable thanks to Elastic Search</li>
          <li>Distributed thanks to Logstash (or others)</li>
          <li>Application agnostic (data formatted by log aggregator)</li>
          <li><strong>tail -f | grep something</strong> doesn't scale</li>
        </ul>
      </section>
      <section>
        <h3>When should I use Kibana?</h3>
        <ul>
          <li>Logs are your main source of information</li>
          <li>Sending metrics from your applications isn't realistic</li>
          <li>You need to query the same data in multiple ways</li>
          <li>You're happy with an in-house, self-hosted solution</li>
        </ul>
      </section>
      <section>
        <h3>Now What?</h3>
        <p>Check out <a href="http://www.elasticsearch.org/overview/kibana/" target="_blank">Kibana's</a> Home Page</p>
        <hr />
        <h4>Check out other solutions</h4>
        <ul>
          <li>
            <a href="https://github.com/etsy/statsd/" target="_blank">Statsd</a>
          </li>
          <li>
            <a href="http://opentsdb.net/" target="_blank">OpenTSDB</a>
          </li>
        </ul>
        <ul>
          <li>
            <a href="http://graphite.wikidot.com/" target="_blank">Graphite</a>
          </li>
          <li>
            <a href="https://metrics.librato.com/" target="_blank">Librato</a>
          </li>
          <li>
            <a href="http://www.geckoboard.com/" target="_blank">Geckoboard</a>
          </li>
        </ul>
      </section>
      <section>
        <h2>Monitor Everything with Sensu</h2>
      </section>
      <section>
        <h3>Sensu in a nutshell</h3>
        <ul>
          <li>Distributed checks &amp; handlers system written in Ruby</li>
          <li>Distributed Server / Client architecture on top of RabbitMQ</li>
          <li>Monitor anything by running a series of checks</li>
          <li>React to problems / results by designating handlers</li>
        </ul>
      </section>
      <section>
        <h3>Sensu in a nutshell</h3>
        <p>Sensu's winning feature is its simple operation model:</p>
        <p>
          Tell me <strong>what to check</strong>, and how to <strong>handle results</strong>
        </p>
      </section>
      <section>
        <h3>What can I do with Sensu?</h3>
        <ul>
          <li>Check server load and email me if it's above 90%</li>
          <li>Empty <strong>/var/log</strong> if disk-space is above 75%</li>
          <li>Notify me over XMPP if Nginx is down</li>
          <li>Check that <strong>/api/kpi</strong> returns <strong>200</strong> and SMS if not</li>
          <li>Add more workers if worker queue is full</li>
          <li>Count errors in log files and send results to Graphite</li>
          <li>Check if death-star is near and alert Alderaan High Council</li>
        </ul>
      </section>
      <section>
        <h3>How does Sensu work?</h3>
        <figure>
          <img src="img/sensu-operation-model.svg" height="580" />
        </figure>
      </section>
      <section>
        <h3>Why should I use Sensu?</h3>
        <ul>
          <li>Distributed and scalable - Built for the cloud</li>
          <li>Monitor everything from OS to Service Health</li>
          <li>Multiple handlers per check</li>
          <li>Great for real-time monitoring or historical analysis</li>
          <li>Great 3rd-party integration (Graphite, Dashing, Pager Duty)</li>
          <li>Highly customizable via straight-forward Ruby DSL</li>
          <li>Open-Source, actively maintained, vibrant community</li>
          <li>Lot's of plugins to choose from</li>
        </ul>
      </section>
      <section>
        <h3>What Now?</h3>
        <p>
          Visit the <a href="http://sensuapp.org" target="_blank">Sensu Website</a>
        </p>
        <p>
          Check out the <a href="https://github.com/sensu/sensu-community-plugins" target="_blank">Community Plugins Repo</a> on Github.
        </p>
      </section>
      <section>
        <h2>Putting it all together</h2>
      </section>
      <section>
        <figure>
          <img src="img/sensu-kibana-setup.svg"  height="580" />
          <figcaption>
            <p>
              <small>Logstash, Kibana &amp; Sensu Setup Example</small>
            </p>
          </figcaption>
        </figure>
      </section>
      <section>
        <h2>Questions?</h2>
      </section>
      <section>
        <h2>Thank You!</h2>
        <p>
          <strong>Presentation</strong>: <a href="http://goo.gl/68A2bj" target="_blank">http://goo.gl/68A2bj</a>
        </p>
        <p>
          <strong>Email Me </strong>: zohar@zohararad.com
        </p>
      </section>
    </div>
  </div>

  <script src="../reveal-js-2.5.0/lib/js/head.min.js"></script>
  <script src="../reveal-js-2.5.0/js/reveal.min.js"></script>

  <script>

    // Full list of configuration options available here:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: false,
      progress: true,
      history: true,
      center: true,
      loop: true,

      theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
      transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

      // Optional libraries used to extend on reveal.js
      dependencies: [
        { src: '../reveal-js-2.5.0/lib/js/classList.js', condition: function() { return !document.body.classList; } },
        // Syntax highlight for <code> elements
        { src: '../reveal-js-2.5.0/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
      ]
    });

  </script>
</body>
</html>