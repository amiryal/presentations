<!DOCTYPE HTML>
<html lang="en">
<head>
  <title>Asset Management Unbroken</title>
  <meta charset="utf-8">
  <meta name="description" content="Asset Management Unbroken">
  <meta name="author" content="Zohar Arad">
  <meta name="viewport" content="width=792, user-scalable=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <link rel="stylesheet" href="../shower/themes/ribbon/styles/screen.css">
  <style>
    .slide h3{
      font-weight: bold;
      font-size: 32px;
    }

    .shout h3 {
      font-size: 60px;
      font-weight: bold;
      line-height: 1.4;
      margin-top: 80px;
    }

    .shout h2 small {
      font-size: 40px;
    }

    .center {
      text-align: center;
    }

    figcaption, pre{
      font-size: 18px;
      line-height: inherit;
    }

    small {
      font-size: 16px;
    }

    .slide pre code {
      line-height: inherit;
    }

    .slide.cover footer{
      position: absolute;
      right:0;
      bottom:0;
      left:0;
      background-color: rgba(255,255,255,0.9);
      display: block;
      padding: 15px 0;
      line-height: 1.2;
    }

    .slide.cover footer small{
      font-size: 14px;
    }

    .slide.cover.centered img{
      height: auto;
      -webkit-transform:translate3d(-50%, -50%, 0);
      transform:translate3d(-50%, -50%, 0);
      left: 50%;
      top: 50%;
    }

    .slide p {
      margin-bottom: 30px;
    }
  </style>
</head>
<body class="list" data-scroll="locked">
  <header class="caption">
    <h1>Asset Management Unbroken</h1>
    <p>Zohar Arad. &copy; 2014</p>
  </header>
  <section class="slide">
    <div>
      <h2>About Me</h2>
      <ul>
        <li>Full-Stack Web Developer (Ruby, Javascript)</li>
        <li>Lead-Tech at Quicklizard Ltd.</li>
        <li>Freelance consultant &amp; trainer</li>
      </ul>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Let's talk about assets</h2>
      <ul>
        <li>Pre-compilation (SASS, LESS, CoffeeScript)</li>
        <li>Order of inclusion (dependency management)</li>
        <li>Optimisation (Concatenation, minification, compression)</li>
        <li>Cache-busting</li>
        <li>Inclusion in Template</li>
        <li>CDNs</li>
        <li>Image Optimisation (optional)</li>
      </ul>
    </div>
  </section>
  <section class="slide shout grow">
    <div>
      <h2>
        Easy Right?<br />
        <small class="next">
          Wrong! Asset management is pretty broken...
        </small>
      </h2>
    </div>
  </section>
  <section class="slide shout">
    <div>
      <h2>
        Now What?<br />
        <small>Let's see what's broken and how to fix it</small>
      </h2>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Scenario #1 - The Freelance FED</h2>
      <figure>
        <blockquote>
          <p>
            I only do the front-end. I'll use some automation for pre-processing and possibly building and optimising.
            Once finished, I hand off the project to the client.
          </p>
        </blockquote>
      </figure>
      <p class="next">But... what about deployment, cache-busting, GZipping, CND?</p>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Scenario #2 - The Over-Optimiser</h2>
      <figure>
        <blockquote>
          <p>
            For the sake of development speed and separation of concerns, the backend is only an API server.
            It doesn't do any FEDdy stuff. That's the FED's job (or the browser's).
          </p>
        </blockquote>
        <p class="next">
          So... even though your backend supports templating, pre-processing and dependency management,
          the FED should just write their own asset-management code?
        </p>
      </figure>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Scenario #3 - The RequireJS Addict</h2>
      <figure>
        <blockquote>
          <p>
            RequireJS is awesome! Awesome I tell you. It lets me defined dependencies, packages and helps me ensure my
            code is self-contained! It even has a build system with a very catchy name.
          </p>
        </blockquote>
        <p class="next">
          Right. But you still have to manually pre-process, cache-bust and GZip your build.
        </p>
      </figure>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Scenario #4 - The DIY Know-it-all</h2>
      <figure>
        <blockquote>
          <p>
            Our project has very specific requirements that aren't fully addressed by community tools, so I wrote
            a complete asset manager in Clojure since it's the fastest language on earth. Only I know how it works, but rest assured
            it works flawlessly (and very quickly, in parallel threads, on our CI server).
          </p>
        </blockquote>
        <p class="next">
          Right. So you wasted all that time on a proprietary solution to a problem everyone shares.
        </p>
      </figure>
    </div>
  </section>
  <section class="slide cover centered">
    <div>
      <img src="img/llama.jpg" />
      <footer class="center">
        You're a Llama and you know it!<br />
        <small>source: http://www.worth1000.com/entries/437711/einstein-lamma</small>
      </footer>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Scenario #5 - The Careless FED</h2>
      <blockquote>
        <p>
          I still haven't gotten around to convincing my boss we should add some asset-management capabilities to our code,
          so meanwhile I just include my CSS and JS as they are and we serve them from Apache.
        </p>
      </blockquote>
    </div>
  </section>
  <section class="slide cover centered">
    <div>
      <img src="img/big-llama.jpg" />
      <footer class="center">
        So you're a big fat llama!<br />
        <small>source: http://www.bluebison.net/content/2006/a-big-llama/</small>
      </footer>
    </div>
  </section>
  <section class="slide shout">
    <div>
      <h2>Ok.<br />Enough Llamas</h2>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Unbreaking Asset Management</h2>
      <table>
        <tbody>
          <tr>
            <th colspan="2">Automatic Solution - Use existing tools</th>
          </tr>
          <tr>
            <th>Ruby</th>
            <td>Sprokets, Jammit</td>
          </tr>
          <tr>
            <th>Node.js</th>
            <td>connect-assets, connect-mincer</td>
          </tr>
          <tr>
            <th>PHP</th>
            <td>Sprockets-PHP, Bonfire Assets (no cache busting)</td>
          </tr>
          <tr>
            <th>Python</th>
            <td>webassets</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Unbreaking Asset Management</h2>
      <table>
        <tbody>
          <tr>
            <th colspan="2">Manual Solution - Gulp example</th>
          </tr>
          <tr>
            <th>Pre-processors</th>
            <td>gulp-sass, gulp-less, gulp-coffee</td>
          </tr>
          <tr>
            <th>Templates</th>
            <td>gulp-jaded, gulp-handlebars, gulp-assetpaths</td>
          </tr>
          <tr>
            <th>Optimisation</th>
            <td>gulp-minify-css, gulp-uglify, gulp-concat,<br />gulp-tar, gulp-gzip</td>
          </tr>
          <tr>
            <th>Cache-busting</th>
            <td>gulp-rev, gulp-rev-collector, gulp-rev-all</td>
          </tr>
          <tr>
            <th>CDN</th>
            <td>gulp-awspublish, gulp-cloudfront, deploy-azure-cdn</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="slide shout">
    <div>
      <h2>What about deployment?</h2>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Deployment</h2>
      <p>Our deployment system needs to painlessly support:</p>
      <ul>
        <li class="next">Asset Management (CLI)</li>
        <li class="next">Rollbacks</li>
        <li class="next">Disaster Recovery</li>
        <li class="next">Restarts</li>
        <li class="next">Partial rerun</li>
      </ul>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Deploying Assets</h2>
      <ul>
        <li class="next">Pre-compiling</li>
        <li class="next">Optimising (concatenation, minification, GZipping)</li>
        <li class="next">Cache-busting (and asset manifests)</li>
        <li class="next">CDN upload</li>
        <li class="next">Optionally optimize / combine graphics</li>
      </ul>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Deployment Tools</h2>
      <table>
        <tbody>
          <tr>
            <th>Ruby</th>
            <td>Capistrano, Mina</td>
          </tr>
          <tr>
            <th>Python</th>
            <td>Fabric</td>
          </tr>
          <tr>
            <th>Node</th>
            <td>Deploy, Flightplan</td>
          </tr>
          <tr>
            <th>Bash</th>
            <td>Roll your own, Git (Just Kidding)</td>
          </tr>
          <tr>
            <th>PHP</th>
            <td>Long rope and a noose</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>
  <section class="slide shout">
    <div>
      <h2>
        Git Deployment<br />Sucks
      </h2>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Putting it all together</h2>
      <p>
        You should always prefer to use existing tools. Moreover, you should always prefer to combine backend
        framework support (like connect-assets/mincer) with a solid deployment tool (like Fabric).
      </p>
      <p class="next">
        <em>But... in case you can't here's a detox plan.</em>
      </p>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Detox Plan</h2>
      <ol>
        <li>Choose a solid, suitable deployment tool</li>
        <li class="next">Choose one automation tool and suitable set of plugins</li>
        <li class="next">Do not neglect cache-busting &amp; GZipping. Do it properly!</li>
        <li class="next">If in doubt, copy logic from Sprockets / connect-mincer / connect-assets</li>
        <li class="next">Use configuration and ENV vars instead of hard-coding stuff</li>
      </ol>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Detox Plan</h2>
      <ol>
        <li>Make sure build tasks are runnable from CLI</li>
        <li class="next">Use the smallest number of moving parts to avoid potential breakage</li>
        <li class="next">As above, try to avoid mixing external dependencies (like Java for YUI)</li>
        <li class="next">Build assets on the target server. Do not commit builds to SCM</li>
      </ol>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Pipeline Flow</h2>
      <p>
        Pre-compile / Pre-process &rarr; Concatenate &amp; Minify  &rarr; Save &rarr;<br />
        MD5 file content &rarr; Add MD5 value to file-name &rarr;<br />
        Create Cache Manifest &rarr;
        Update templates with new file-names &rarr;<br />
        GZip &rarr; Upload to CDN
      </p>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Pipeline Flow</h2>
      <p>
        If you're a real hero, run MD5 to CDN steps on images too (use MD5 of Base64 value for content diffing)
      </p>
    </div>
  </section>
  <section class="slide">
    <div>
      <h2>Closing Thoughts</h2>
      <ul>
        <li>Look at things holistically</li>
        <li>Use existing solutions</li>
        <li>Get to know your Web server (hopefully Nginx or comparable)</li>
        <li>Treat asset management as a first-class requirement, not a lowly after-thought</li>
        <li>Choose technology that supports above</li>
      </ul>
    </div>
  </section>
  <section class="slide shout">
    <div>
      <h2>Thank You!</h2>
    </div>
  </section>
  <section class="slide">
      <figure class="place c c">
        <p>
          <img src="http://qrfree.kaywa.com/?l=1&s=8&d=http%3A%2F%2Fzohararad.github.io%2Fpresentations%2Fasset-management-unbroken%2F" alt="QRCode" />
        </p>
        <figcaption class="center">
          <h3>Scan Me...</h3>
        </figcaption>
      </figure>
    </div>
  </section>
  <div class="progress"><div></div></div>
  <script src="../shower/shower.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49621437-1', 'zohararad.github.io');
    ga('send', 'pageview');

  </script>
</body>
</html>